<!DOCTYPE html>
<html lang="'zh-CN">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="normalize.css">
    <link rel="stylesheet" href="http://localhost:8080/normalize.css">
    <title>结构视图</title>
</head>
<body>
    <h2>结构视图</h2>


    <style>
        .node circle {
            fill: #fff;
            stroke: steelblue;
            stroke-width: 1.5px;
        }

        .node text {
            font: 10px sans-serif;
        }

        .link {
            fill: none;
            stroke: #ccc;
            stroke-width: 1.5px;
        }
    </style>

    <div class="bo" style="width: 100%; display: flex; justify-content: center;">
        <script src="https://d3js.org/d3.v6.min.js"></script>
        <script>
            // 创建一个SVG元素
            var svg = d3.select("div.bo")
                .append("svg")
                .attr("width", 960)
                .attr("height", 600);

            // 创建一个树布局
            var tree = d3.tree()
            // 设置画布大小为800x-300
                .size([800, 300]);  // 注意这里将第二个值改为负数

            // 创建一个根节点
            var root = d3.hierarchy({
                "name": "Root",
                "children": [
                    {
                        "name": "Child 1",
                        "children": [
                            { "name": "Grandchild 1" },
                            { "name": "Grandchild 2" }
                        ]
                    },
                    {
                        "name": "Child 2",
                        "children": [
                            { "name": "Grandchild 3" },
                            { "name": "Grandchild 4" }
                        ]
                    }
                ]
            });

            // 创建链接
            var link = svg.selectAll(".link")
                // 绑定数据
                .data(tree(root).links())
                // 进入数据
                .enter().append("path")
                // 设置类名
                .attr("class", "link")
                // 设置路径
                .attr("d", d3.linkHorizontal()
                    // 设置x坐标
                    .x(function(d) { return d.y; })
                    // 设置y坐标
                    .y(function(d) { return d.x; }));

            // 创建节点
            var node = svg.selectAll(".node")
            // 将根节点的后代数据绑定到元素上
                .data(root.descendants())
                // 为每个数据元素创建一个g元素
                .enter().append("g")
                // 为每个g元素添加一个class属性，值为"node"
                .attr("class", "node")
                // 为每个g元素添加一个transform属性，值为"translate(" + d.y + "," + d.x + ")"
                .attr("transform", function(d) { return "translate(" + d.y + "," + d.x + ")"; });

            // 添加圆形节点
            node.append("circle")
        // 设置圆的半径为4.5
                .attr("r", 4.5);

            // 添加文本
            node.append("text")
                .attr("dy", 3) // 设置文本的垂直偏移量
                .attr("x", function(d) { return d.children ? -8 : 8; }) // 根据是否有子节点设置文本的水平位置
                .style("text-anchor", function(d) { return d.children ? "end" : "start"; }) // 根据是否有子节点设置文本的锚点
                .text(function(d) { return d.data.name; }); // 设置文本内容为节点的名称
        </script>
    </div>







    <!-- <style>
        .bubble {
            position: absolute;
            border-radius: 50%;
            text-align: center;
            line-height: calc(100% - 6px); /* Adjust line height for better centering */
            font-size: 16px;
            color: white;
            pointer-events: none; /* Prevents interaction with bubbles */
        }
        .bubble:hover {
            transform: scale(1.5); /* 悬浮时放大1.1倍 */
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.5); /* 悬浮时添加亮框（阴影效果） */
        }
    </style> -->
    <!-- 气泡通过JavaScript动态添加 -->
    <!-- <div id="bubbleChart" style="position: relative; width: 600px; height: 400px; overflow: hidden;">
    </div> -->
    <script>
        // const bubbleData = [
        //     { x: 100, y: 100, radius: 30, color: 'red', value: 'A' },
        //     { x: 200, y: 200, radius: 40, color: 'blue', value: 'B' },
        //     { x: 300, y: 150, radius: 25, color: 'green', value: 'C' },
        //     { x: 100, y: 100, radius: 30, color: 'red', value: 'A' },
        //     { x: 200, y: 200, radius: 40, color: 'blue', value: 'B' },
        //     { x: 300, y: 150, radius: 25, color: 'green', value: 'C' },
        //     // 添加更多气泡数据...
        // ];

        // const chartContainer = document.getElementById('bubbleChart');

        // function drawBubble(data) {
        //     let intervalId; // 用于存储定时器的ID
        //     const bubble = document.createElement('div');
        //     bubble.classList.add('bubble');
        //     bubble.style.left = `${data.x}px`;
        //     bubble.style.top = `${data.y}px`;
        //     bubble.style.width = `${data.radius * 2}px`;
        //     bubble.style.height = `${data.radius * 2}px`;
        //     bubble.style.backgroundColor = data.color;
        //     bubble.textContent = data.value;
        //     chartContainer.appendChild(bubble);

        //     // 为每个气泡添加移动逻辑
        //     let speedX = Math.random() * 10 - 2.5; // 随机速度X
        //     let speedY = Math.random() * 10 - 2.5; // 随机速度Y

        //     function moveBubble() {
        //         let newX = parseInt(bubble.style.left, 10) + speedX;
        //         let newY = parseInt(bubble.style.top, 10) + speedY;

        //         // 防止气泡移出容器
        //         if (newX < 0 || newX + bubble.offsetWidth > chartContainer.offsetWidth) {
        //             speedX = -speedX;
        //         }
        //         if (newY < 0 || newY + bubble.offsetHeight > chartContainer.offsetHeight) {
        //             speedY = -speedY;
        //         }

        //         bubble.style.left = `${newX}px`;
        //         bubble.style.top = `${newY}px`;
        //     }

        //     // 使用定时器让气泡移动
        //     intervalId = setInterval(moveBubble, 30); // 每30毫秒移动一次

        //     // 5秒后停止移动
        //     setTimeout(() => {
        //         clearInterval(intervalId);
        //     }, 2000);
        // }

        // bubbleData.forEach(drawBubble);
    </script>

    <script>
        //     <style>
        //         .solarsys{
        //             width: 800px;
        //             height: 800px;;
        //             position: relative;
        //             margin: 0 auto;
        //             background-color: #000000;
        //             padding: 0;
        //             transform: scale(1);
        //         }

        //         /*太阳*/
        //         .sun {
        //             left:357px;
        //             top:357px;
        //             height: 90px;
        //             width: 90px;
        //             background-color: rgb(248,107,35);
        //             border-radius: 50%;
        //             box-shadow: 5px 5px 10px rgb(248,107,35), -5px -5px 10px rgb(248,107,35), 5px -5px 10px rgb(248,107,35), -5px 5px 10px rgb(248,107,35);
        //             position: absolute;
        //             margin: 0;
        //         }

        //         /*水星*/
        //         .mercury {
        //             left:337.5px;
        //             top:395px;
        //             height: 10px;
        //             width: 10px;
        //             background-color: rgb(166,138,56);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 62.5px 5px;
        //             animation: rotate 1.5s infinite linear;
        //         }

        //         /*水星轨道*/
        //         .mercuryOrbit {
        //             left:342.5px;
        //             top:342.5px;
        //             height: 115px;
        //             width: 115px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         /*金星*/
        //         .venus {
        //             left:309px;
        //             top:389px;
        //             height: 22px;
        //             width: 22px;
        //             background-color: rgb(246,157,97);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 91px 11px;
        //             animation: rotate 3.84s infinite linear;
        //         }

        //         /*金星轨道*/
        //         .venusOrbit {
        //             left:320px;
        //             top:320px;
        //             height: 160px;
        //             width: 160px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             /*margin: 100px;*/
        //             /*transform-origin: -75px -75px;*/
        //             /*animation: rotate 4s infinite linear;*/
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         /*地球*/
        //         .earth {
        //             left:266.5px;
        //             top:391px;
        //             height: 18px;
        //             width: 18px;
        //             background-color: rgb(115,114,174);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 134px 9px;
        //             animation: rotate 6.25s infinite linear;
        //         }

        //         /*地球轨道*/
        //         .earthOrbit {
        //             left:275px;
        //             top:275px;
        //             height: 250px;
        //             width: 250px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             /*margin: 100px;*/
        //             /*transform-origin: -75px -75px;*/
        //             /*animation: rotate 4s infinite linear;*/
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         /*火星*/
        //         .mars {
        //             left:222.5px;
        //             top:392.5px;
        //             height: 15px;
        //             width: 15px;
        //             background-color: rgb(140,119,63);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 177.5px 7.5px;
        //             animation: rotate 11.75s infinite linear;
        //         }

        //         /*火星轨道*/
        //         .marsOrbit {
        //             left:230px;
        //             top:230px;
        //             height: 340px;
        //             width: 340px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             /*margin: 100px;*/
        //             /*transform-origin: -75px -75px;*/
        //             /*animation: rotate 4s infinite linear;*/
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         /*木星*/
        //         .jupiter {
        //             left:134px;
        //             top:379px;
        //             height: 42px;
        //             width: 42px;
        //             background-color: rgb(156,164,143);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 266px 21px;
        //             animation: rotate 74.04s infinite linear;
        //         }

        //         /*木星轨道*/
        //         .jupiterOrbit {
        //             left:155px;
        //             top:155px;
        //             height: 490px;
        //             width: 490px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             /*margin: 100px;*/
        //             /*transform-origin: -75px -75px;*/
        //             /*animation: rotate 4s infinite linear;*/
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         /*土星*/
        //         .saturn {
        //             left:92px;
        //             top:387px;
        //             height: 26px;
        //             width: 26px;
        //             background-color: rgb(215,171,68);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 308px 13px;
        //             animation: rotate 183.92s infinite linear;
        //         }

        //         /*土星轨道*/
        //         .saturnOrbit {
        //             left:105px;
        //             top:105px;
        //             height: 590px;
        //             width: 590px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             /*margin: 100px;*/
        //             /*transform-origin: -75px -75px;*/
        //             /*animation: rotate 4s infinite linear;*/
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         /*天王星*/
        //         .uranus {
        //             left:41.5px;
        //             top:386.5px;
        //             height: 27px;
        //             width: 27px;
        //             background-color: rgb(164,192,206);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 358.5px 13.5px;
        //             animation: rotate 524.46s infinite linear;
        //         }

        //         /*天王星轨道*/
        //         .uranusOrbit {
        //             left:55px;
        //             top:55px;
        //             height: 690px;
        //             width: 690px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             /*margin: 100px;*/
        //             /*transform-origin: -75px -75px;*/
        //             /*animation: rotate 4s infinite linear;*/
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         /*海王星*/
        //         .neptune {
        //             left:10px;
        //             top:390px;
        //             height: 20px;
        //             width: 20px;
        //             background-color: rgb(133,136,180);
        //             border-radius: 50%;
        //             position: absolute;
        //             transform-origin: 390px 10px;
        //             animation: rotate 1028.76s infinite linear;
        //         }

        //         /*海王星轨道*/
        //         .neptuneOrbit {
        //             left:20px;
        //             top:20px;
        //             height: 760px;
        //             width: 760px;
        //             background-color: transparent;
        //             border-radius: 50%;
        //             border-style: dashed;
        //             border-color: gray;
        //             position: absolute;
        //             border-width: 1px;
        //             /*margin: 100px;*/
        //             /*transform-origin: -75px -75px;*/
        //             /*animation: rotate 4s infinite linear;*/
        //             margin: 0px;
        //             padding: 0px;
        //         }

        //         @keyframes rotate {
        //             100% {
        //                 transform: rotate(-360deg);
        //             }
        //         }

        //     </style>
        //     <div class="solarsys">
        //     <!--太阳-->
        //     <div class='sun'></div>

        //     <!--水星轨道-->
        //     <div class='mercuryOrbit'></div>

        //     <!--水星-->
        //     <div class='mercury'></div>

        //     <!--金星轨道-->
        //     <div class='venusOrbit'></div>

        //     <!--金星-->
        //     <div class='venus'></div>

        //     <!--地球轨道-->
        //     <div class='earthOrbit'></div>

        //     <!--地球-->
        //     <div class='earth'></div>

        //     <!--火星轨道-->
        //     <div class='marsOrbit'></div>

        //     <!--火星-->
        //     <div class='mars'></div>

        //     <!--木星轨道-->
        //     <div class='jupiterOrbit'></div>

        //     <!--木星-->
        //     <div class='jupiter'></div>

        //     <!--土星轨道-->
        //     <div class='saturnOrbit'></div>

        //     <!--土星-->
        //     <div class='saturn'></div>

        //     <!--天王星轨道-->
        //     <div class='uranusOrbit'></div>

        //     <!--天王星-->
        //     <div class='uranus'></div>

        //     <!--海王星轨道-->
        //     <div class='neptuneOrbit'></div>

        //     <!--海王星-->
        //     <div class='neptune'></div>
        // </div>

    </script>

</body>
</html>


